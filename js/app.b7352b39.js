(function(t){function e(e){for(var a,o,i=e[0],c=e[1],u=e[2],f=0,d=[];f<i.length;f++)o=i[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&d.push(s[o][0]),s[o]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);l&&l(e);while(d.length)d.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var t,e=0;e<r.length;e++){for(var n=r[e],a=!0,i=1;i<n.length;i++){var c=n[i];0!==s[c]&&(a=!1)}a&&(r.splice(e--,1),t=o(o.s=n[0]))}return t}var a={},s={app:0},r=[];function o(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=a,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)o.d(n,a,function(e){return t[e]}.bind(null,a));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"14e5":function(t,e,n){},"2cb0":function(t,e,n){},"2f5f":function(t,e,n){},"32fe":function(t,e,n){"use strict";n("d959")},3394:function(t,e,n){"use strict";n("2f5f")},4678:function(t,e,n){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=r(t);return n(e)}function r(t){if(!n.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="4678"},"4d8b":function(t,e,n){"use strict";n("a7d3")},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view"),n("mobile-menu"),t.showLoading?n("Loading"):t._e()],1)},r=[],o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"loading-wrap"},[n("svg",{staticClass:"spinner",attrs:{width:"65px",height:"65px",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg"}},[n("circle",{staticClass:"path",attrs:{fill:"none","stroke-width":"6","stroke-linecap":"round",cx:"33",cy:"33",r:"30"}})])])},i=[],c={},u=c,l=(n("cf19"),n("2877")),f=Object(l["a"])(u,o,i,!1,null,"ef0ba8b8",null),d=f.exports,p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"w-screen overflow-hidden"},[t.active?n("div",{staticClass:"fixed w-screen h-screen top-0 left-0 z-20"},[n("div",{staticClass:"mask"}),n("nav",{staticClass:"\n                menu\n                overflow-hidden\n                fixed\n                right-0\n                top-0\n                w-60\n                gradients-dark\n                z-30\n            "},[n("ul",{staticClass:"\n                    menu-list\n                    absolute\n                    pt-16\n                    pr-48\n                    top-16\n                    rounded-full\n                    gradients\n                "},t._l(t.menuList,(function(e){return n("li",{key:e.path,staticClass:"text-white pr-40 py-4 text-right text-lg"},[n("router-link",{attrs:{to:e.path}},[t._v(t._s(e.name))])],1)})),0)])]):t._e(),n("div",{staticClass:"hamburger",on:{click:t.ctrlMenu}},[n("span",{staticClass:"line"}),n("span",{staticClass:"line"}),n("span",{staticClass:"line"})])])},m=[],h={data:function(){return{menuList:[{name:"回首頁",path:"/"},{name:"公車快找",path:"/bussearch"},{name:"查詢公車",path:"/busnear"},{name:"該搭哪一台公車",path:"/b"},{name:"我的最愛",path:"/favorite"}],active:!1}},methods:{ctrlMenu:function(){this.active=!this.active}}},b=h,v=(n("b014"),Object(l["a"])(b,p,m,!1,null,"7f0aaa98",null)),g=v.exports,y={components:{Loading:d,MobileMenu:g},data:function(){return{showLoading:!1}},created:function(){var t=this;this.$bus.$on("setLoading",(function(e){t.showLoading=e}))},beforeDestroy:function(){this.$bus.$off("setLoading")}},w=y,j=(n("034f"),Object(l["a"])(w,s,r,!1,null,null,null)),x=j.exports,k=n("8c4f"),_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("Header"),n("div",{staticClass:"px-4"},[n("ul",{staticClass:"mt-8"},[n("li",{staticClass:"list-item",on:{click:function(e){return t.goPath("/bussearch")}}},[t._m(0),n("img",{attrs:{src:"images/Index-section-image04_m.svg",alt:""}})]),n("li",{staticClass:"list-item",on:{click:function(e){return t.goPath("/busnear")}}},[t._m(1),n("img",{attrs:{src:"images/Index-section-image01_m.svg",alt:""}})]),n("li",{staticClass:"list-item",on:{click:function(e){return t.goPath("/")}}},[t._m(2),n("img",{attrs:{src:"images/Index-section-image02_m.svg",alt:""}})])])]),n("near-stop"),n("Footer")],1)},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"w-2/3 text-left"},[n("span",{staticClass:"text-lg font-bold block text-black"},[t._v("公車快找")]),n("span",{staticClass:"text-gray-600 text-sm"},[t._v("直接輸入路線名稱獲得資訊！")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"w-2/3 text-left"},[n("span",{staticClass:"text-lg font-bold block text-black"},[t._v("查詢站牌")]),n("span",{staticClass:"text-gray-600 text-sm"},[t._v("附近站牌 / 公車動態及路線圖")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"w-2/3 text-left"},[n("span",{staticClass:"text-lg font-bold block text-black"},[t._v("推薦公車路線")]),n("span",{staticClass:"text-gray-600 text-sm"},[t._v("直接輸入路線名稱獲得資訊！")])])}],N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"\n        bg-primary-700\n        h-9\n        fixed\n        bottom-0\n        flex\n        w-full\n        justify-center\n        items-center\n        text-white\n    "},[t._v(" The F2E 3rd Week3 - Bus ")])},S=[],L={},O=L,I=(n("de35"),Object(l["a"])(O,N,S,!1,null,null,null)),M=I.exports,T=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},R=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"\n        gradients-deep\n        flex flex-wrap\n        justify-center\n        items-center\n        relative\n        h-24\n        w-full\n        text-white\n    "},[n("h1",{staticClass:"w-full text-2xl text-right pr-5"},[t._v(" 機智公車族 "),n("p",{staticClass:"text-base"},[t._v("全台公車動態時刻查詢應用服務")])]),n("img",{staticClass:"absolute top-1 left-1",attrs:{src:"images/Index-header-logo.svg",alt:""}}),n("img",{staticClass:"absolute bottom-0 right-0",attrs:{src:"images/Index-header-quarter.svg",alt:""}})])}],D={components:{}},B=D,P=(n("4d8b"),Object(l["a"])(B,T,R,!1,null,null,null)),E=P.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.showList,expression:"!showList"}],staticClass:"pos-btn px-4"},[n("p",{staticClass:"text-md font-bold block text-black pt-6"},[t._v(" 開啟裝置定位功能，以便為您提供更好的服務。 ")]),n("p",{staticClass:"text-sm text-primary-700 pb-2"},[t._v(" 我們將用在提供您所在位置附近的交通等資訊。 ")]),n("button",{staticClass:"\n                border-2\n                w-full\n                h-12\n                text-primary-500\n                border-primary-500\n                rounded-3xl\n            ",on:{click:t.getNowPos}},[t._v(" 開啟定位功能 ")])]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showList,expression:"showList"}],staticClass:"near-list bg-light mt-8 py-4 px-4"},[n("p",{staticClass:"text-lg text-left font-bold text-gray-500"},[t._v("最近站牌")]),n("ul",[t._l(t.stopList,(function(e){return n("li",{key:e.StopUID},[n("p",{staticClass:"font-bold text-black"},[t._v(" "+t._s(e.StopName.Zh_tw)+" ")]),n("p",{staticClass:"text-gray-600"},[t._v(t._s(e.StopName.StopAddress))])])})),n("li",{directives:[{name:"show",rawName:"v-show",value:0===t.stopList.length,expression:"stopList.length === 0"}],staticClass:"text-primary-500 text-md"},[t._v(" 附近無站牌 ")])],2)])])},z=[],A=n("2909"),K=n("3835"),Z=n("1da1"),F=(n("96cf"),n("4de4"),n("d3b7"),n("c740"),n("99af"),n("d81d"),n("5530")),H=(n("b64b"),n("bc3a")),U=n.n(H),Y=U.a.create({});Y.interceptors.request.use((function(t){var e=t.params;return Object.keys(e).map((function(t){e[t]||delete e[t]})),t}),(function(t){return t})),Y.interceptors.response.use((function(t){return t.data}),(function(t){var e=t.response.status;return console.log("error--".concat(e),"error"),Promise.reject(t)}));var G=Y,q="https://ptx.transportdata.tw/MOTC/v2/Bus",V=q+"/Route/City",J=q+"/EstimatedTimeOfArrival/City",Q=q+"/Shape/City",W=q+"/RealTimeByFrequency/City",X=q+"/StopOfRoute/City",tt=q+"/Station/NearBy",et=q+"/EstimatedTimeOfArrival/City",nt=q+"/EstimatedTimeOfArrival/NearBy",at=[{ISO:"TPE",label:"臺北市",value:"Taipei"},{ISO:"NWT",label:"新北市",value:"NewTaipei"},{ISO:"TAO",label:"桃園市",value:"Taoyuan"},{ISO:"TXG",label:"臺中市",value:"Taichung"},{ISO:"TNN",label:"臺南市",value:"Tainan"},{ISO:"KHH",label:"高雄市",value:"Kaohsiung"},{ISO:"KEE",label:"基隆市",value:"Keelung"},{ISO:"HSZ",label:"新竹市",value:"Hsinchu"},{ISO:"HSQ",label:"新竹縣",value:"HsinchuCounty"},{ISO:"MIA",label:"苗栗縣",value:"MiaoliCounty"},{ISO:"CHA",label:"彰化縣",value:"ChanghuaCounty"},{ISO:"NAN",label:"南投縣",value:"NantouCounty"},{ISO:"YUN",label:"雲林縣",value:"YunlinCounty"},{ISO:"CYQ",label:"嘉義縣",value:"ChiayiCounty"},{ISO:"CYI",label:"嘉義市",value:"Chiayi"},{ISO:"PIF",label:"屏東縣",value:"PingtungCounty"},{ISO:"ILA",label:"宜蘭縣",value:"YilanCounty"},{ISO:"HUA",label:"花蓮縣",value:"HualienCounty"},{ISO:"TTT",label:"臺東縣",value:"TaitungCounty"},{ISO:"KIN",label:"金門縣",value:"KinmenCounty"},{ISO:"PEN",label:"澎湖縣",value:"PenghuCounty"},{ISO:"LIE",label:"連江縣",value:"LienchiangCounty"}],st=n("6c2d"),rt=function(){var t="b65665fcca144956a79d25bb3edc7b34",e="daVxLDO01nPgTTwhQKVBmY-pjeQ",n=(new Date).toGMTString(),a=new st["a"]("SHA-1","TEXT");a.setHMACKey(e,"TEXT"),a.update("x-date: "+n);var s=a.getHMAC("B64"),r='hmac username="'.concat(t,'", algorithm="hmac-sha1", headers="x-date", signature="').concat(s,'"');return{Authorization:r,"X-Date":n,"Content-Type":"application/x-www-form-urlencoded"}},ot=function(t){var e=t.city,n=void 0===e?"":e,a=t.routeName,s=void 0===a?"":a;return delete t.city,delete t.routeName,{cityPath:n,routeName:s,data:t}},it=function(t){var e=ot(t),n=e.cityPath,a=e.routeName,s=e.data,r={headers:rt(),params:Object(F["a"])({},s)};return console.log("routeName",a),G.get(V+"/".concat(n,"/").concat(a),r)},ct=function(t){var e=ot(t),n=e.cityPath,a=e.routeName,s=e.data,r={headers:rt(),params:Object(F["a"])({},s)};return G.get(J+"/".concat(n,"/").concat(a),r)},ut=function(t){var e=ot(t),n=e.cityPath,a=e.routeName,s=e.data,r={headers:rt(),params:Object(F["a"])({},s)};return G.get(X+"/".concat(n,"/").concat(a),r)},lt=function(t){var e=ot(t),n=e.cityPath,a=e.routeName,s=e.data,r={headers:rt(),params:Object(F["a"])({},s)};return G.get(Q+"/".concat(n,"/").concat(a),r)},ft=function(t){var e=ot(t),n=e.cityPath,a=e.routeName,s=e.data,r={headers:rt(),params:Object(F["a"])({},s)};return G.get(W+"/".concat(n,"/").concat(a),r)},dt=function(t){var e={headers:rt(),params:Object(F["a"])({},t)};return G.get(tt,e)},pt=function(t){var e={headers:rt(),params:Object(F["a"])({},t)};return G.get(nt,e)},mt=function(t){var e=ot(t),n=e.cityPath,a=e.data,s={headers:rt(),params:Object(F["a"])({},a)};return G.get(et+"/".concat(n,"/PassThrough/Station/").concat(a.stationId),s)},ht=(n("c1df"),function(t,e,n,a){var s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"K";if(t==n&&e==a)return 0;var r=Math.PI*t/180,o=Math.PI*n/180,i=e-a,c=Math.PI*i/180,u=Math.sin(r)*Math.sin(o)+Math.cos(r)*Math.cos(o)*Math.cos(c);return u>1&&(u=1),u=Math.acos(u),u=180*u/Math.PI,u=60*u*1.1515,"K"==s&&(u*=1.609344),"N"==s&&(u*=.8684),u}),bt=function(t){return Math.floor(t/60)},vt=function(t){var e=bt(t),n="";switch(!0){case 0===e:n="進站中";break;case e<=1&&0<e:n="即將到站";break;case!e:n="尚未發車";break;default:n=e+"分鐘";break}return n},gt={data:function(){return{showList:!1,stopList:[],nearStop:{},timeList:[]}},computed:{filterBusList:function(){var t=this.stopList.filter((function(t,e,n){n.findIndex((function(e){return e.StopName.Zh_tw===t.StopName.Zh_tw}))}));return t}},methods:{getNowPos:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.longitude,a=e.coords.latitude;console.log("longitude",n),console.log("latitude",a),t.showList=!0,t.getNearStop(a,n)}),(function(t){var e=t.code,n=t.message;console.log("error","code=".concat(e,", msg=").concat(n))}))},getNearStop:function(t,e){var n=this;return Object(Z["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={$spatialFilter:"nearby(".concat(t,",").concat(e,",170)")},a.prev=1,a.next=4,dt(s);case 4:r=a.sent,n.stopList=r,console.log("this.lineInfo",n.lineInfo),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log("error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()},calcDistance:function(t,e){if(1!==this.stopList.length){var n=this.stopList.map((function(t){var e,n;return[null===(e=t.StopPosition)||void 0===e?void 0:e.PositionLat,null===(n=t.StopPosition)||void 0===n?void 0:n.PositionLon]})),a=n.map((function(n){var a=Object(K["a"])(n,2),s=a[0],r=a[1];return ht(t,e,s,r)})),s=a.indexOf(Math.min.apply(Math,Object(A["a"])(a)));this.nearStop=this.stopList[s];var r=this.nearStop.StopPosition,o=r.PositionLat,i=r.PositionLon;this.getNearEstimated(o,i)}else this.nearStop=this.stopList[0]},getNearEstimated:function(t,e){var n=this;return Object(Z["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={$spatialFilter:"nearby(".concat(t,",").concat(e,",30)")},a.prev=1,a.next=4,pt(s);case 4:r=a.sent,n.timeList=r,console.log("this.timeList",n.timeList),a.next=12;break;case 9:a.prev=9,a.t0=a["catch"](1),console.log("error",a.t0);case 12:case"end":return a.stop()}}),a,null,[[1,9]])})))()}}},yt=gt,wt=(n("db94"),Object(l["a"])(yt,$,z,!1,null,null,null)),jt=wt.exports,xt={name:"Home",components:{Footer:M,Header:E,NearStop:jt},data:function(){return{}},methods:{goPath:function(t){this.$router.push(t)}}},kt=xt,_t=(n("32fe"),Object(l["a"])(kt,_,C,!1,null,"7821e712",null)),Ct=_t.exports,Nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("map-route",{ref:"mapRoute",attrs:{mapInfo:t.mapInfo},on:{initData:t.initData}}),n("bus-route-info",{attrs:{destination:t.destination,city:t.city,routeName:t.routeName}})],1)},St=[],Lt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n        fixed\n        bg-light\n        overflow-y-scroll\n        bottom-0\n        left-0\n        h-1/3\n        w-screen\n        z-20\n        p-4\n    "},[n("p",{staticClass:"text-gray-500 text-sm"},[t._v("於"+t._s(t.second)+"秒前更新")]),n("h1",{staticClass:"text-3xl pb-4"},[t._v(t._s(t.routeName))]),n("ul",{staticClass:"flex justify-between items-center border-b border-gray-300"},[n("li",{class:["tab-item",{active:0===t.listType}],on:{click:function(e){return t.setTab(0)}}},[t._v(" 往"+t._s(t.destination.to)+" ")]),n("li",{class:["tab-item",{active:1===t.listType}],on:{click:function(e){return t.setTab(1)}}},[t._v(" 往"+t._s(t.destination.back)+" ")])]),t._l(t.typeBusList,(function(e){return n("ul",{key:e.StopUID},[n("li",{staticClass:"w-full border-b p-4 border-line relative"},[n("span",{class:{red:e.EstimateTime<=90}},[t._v(" "+t._s(t.transStatus(e.EstimateTime))+" ")]),n("span",[t._v(t._s(e.StopName.Zh_tw))]),n("span",{staticClass:"\n                    border\n                    absolute\n                    right-2\n                    top-6\n                    border-gray-400\n                    w-3\n                    h-3\n                    rounded-full\n                ",class:{"bg-primary-500":e.EstimateTime<=30}})])])})),n("div",{staticClass:"line"})],2)},Ot=[],It=(n("4e82"),n("a9e3"),{props:{routeName:{type:String,default:""},city:{type:String,default:""},destination:{type:Object,default:function(){}}},watch:{routeName:{immediate:!0,handler:function(){this.routeName&&(this.getBusArrive(),this.getDataByTimer())}}},computed:{sortedBusData:function(){var t=Object(A["a"])(this.busData);return t.sort((function(t,e){return Number(t.StopID)-Number(e.StopID)}))},goBus:function(){return this.sortedBusData.filter((function(t){return 0===t.Direction}))},backBus:function(){return this.sortedBusData.filter((function(t){return 1===t.Direction}))},typeBusList:function(){return 0===this.listType?this.goBus:this.backBus}},data:function(){return{timer:null,listType:0,second:60,busData:[],busPos:[]}},methods:{transStatus:function(t){return console.warn("sec",t),vt(t)},getDataByTimer:function(){var t=this;clearInterval(this.timer),this.timer=setInterval((function(){t.second-=1,t.second<=0&&(t.second=60,t.getBusArrive())}),1e3)},getBusArrive:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={city:t.city,routeName:t.routeName},t.$bus.$emit("setLoading",!0),e.next=5,ct(n);case 5:a=e.sent,t.$bus.$emit("setLoading",!1),t.busData=a,console.log("result"),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](0),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},getBusPos:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={city:t.city,routeName:t.routeName},e.prev=1,e.next=4,ft(n);case 4:a=e.sent,t.busPos=a,console.log("this.busPos",t.busPos),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](1),console.log("error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))()},setTab:function(t){this.listType=t}},mounted:function(){},beforeDestroy:function(){clearInterval(this.timer)}}),Mt=It,Tt=(n("3394"),Object(l["a"])(Mt,Lt,Ot,!1,null,"c94f9c92",null)),Rt=Tt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative z-10 w-screen h-screen",attrs:{id:"map"}})},Bt=[],Pt=(n("159b"),n("6cc5"),n("e11e")),Et=n.n(Pt),$t=n("1134"),zt=(n("8243"),n("3ac1"),n("7319"),null),At=null,Kt=null,Zt=null,Ft=null,Ht=null,Ut={props:{mapInfo:{type:Array,default:function(){return[]}}},data:function(){return{}},methods:{createMap:function(){var t="pk.eyJ1Ijoiam9lY2hhbmcxMDE0IiwiYSI6ImNrdno1ZnM3OTRtM2YzMG8wYnA2NGxpZzEifQ.EDTMLv4rcckA89UjJNWgXQ";zt=Et.a.map("map"),Et.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:t}).addTo(zt),console.log("init!!!!"),At=(new Et.a.MarkerClusterGroup).addTo(zt),Zt=(new Et.a.MarkerClusterGroup).addTo(zt),this.$emit("initData")},cleanMarker:function(){At.clearLayers(),zt.eachLayer((function(t){t instanceof Et.a.Marker&&zt.removeLayer(t)}))},cleanBus:function(){Zt.clearLayers()},setView:function(t,e){console.log("latitude, longitude",t,e),zt.setView([t,e],14)},createMark:function(){Ft=new Et.a.Icon({iconUrl:"images/mark/BusStop.svg",shadowUrl:"",iconSize:[40,40],iconAnchor:[12,41],popupAnchor:[1,-34]}),Ht=new Et.a.Icon({iconUrl:"images/mark/bus.svg",shadowUrl:"",iconSize:[40,40],iconAnchor:[12,41],popupAnchor:[1,-34]})},drawMark:function(t){console.log("drawMark"),t.forEach((function(t){var e=t.StopPosition,n=e.PositionLat,a=e.PositionLon,s=t.StopName;At.addLayer(Et.a.marker([n,a],{icon:Ft}).bindPopup(' <h2 class="title">'.concat(s.Zh_tw,"</h2>")))})),zt.addLayer(At)},drawBus:function(t){this.cleanBus(),t.forEach((function(t){var e=t.BusPosition,n=e.PositionLat,a=e.PositionLon,s=t.PlateNumb;Zt.addLayer(Et.a.marker([n,a],{icon:Ht}).bindPopup('\n                            <h2 class="title">'.concat(s,"</h2>\n                        ")))})),zt.addLayer(Zt)},drawLine:function(t){console.log("Geometry",t);var e=new $t["Wkt"];e.read(t);var n=e.toJson(),a={color:"#7550cc",weight:3};Kt=Et.a.geoJSON(n,{style:a}).addTo(zt),Kt.addData(n),zt.fitBounds(Kt.getBounds()),zt.addLayer(Kt)},createMarkerCluster:function(){return new Et.a.markerClusterGroup({showCoverageOnHover:!1,spiderfyOnMaxZoom:!0,zoomToBoundsOnClick:!0,argumentsspiderfyOnMaxZoom:!1,maxClusterRadius:120,iconCreateFunction:function(t){var e=t.getAllChildMarkers(),n='\n                            <div class="circle">\n                                    '.concat(e.length,"\n                                    </div>\n                            . ");return Et.a.divIcon({html:n,className:"clusterBikeIcon",iconSize:Et.a.point(49,49)})}})},initMap:function(){this.createMark(),this.createMap()}},mounted:function(){},beforeDestroy:function(){zt=null,At=null,Kt=null,Zt=null}},Yt=Ut,Gt=Object(l["a"])(Yt,Dt,Bt,!1,null,null,null),qt=Gt.exports,Vt={components:{BusRouteInfo:Rt,MapRoute:qt},data:function(){return{routeName:"",city:"",mapInfo:[],destination:{to:"",back:""}}},methods:{getRouteMapMark:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={routeName:t.routeName,city:t.city},e.prev=1,e.next=4,ut(n);case 4:a=e.sent,console.log("result",a),s=a[0].Stops,console.log("this.mapInfo",s),t.setView(s),e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](1),console.log("error",e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})))()},getRouteLine:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={routeName:t.routeName,city:t.city},e.prev=1,e.next=4,lt(n);case 4:a=e.sent,s=a[0].Geometry,console.log("this.lineInfo",t.lineInfo),t.$refs.mapRoute.drawLine(s),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},getBusPos:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={routeName:t.routeName,city:t.city},e.prev=1,e.next=4,ft(n);case 4:a=e.sent,s=a,console.log("this.busInfo",s),t.$refs.mapRoute.drawBus(s),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},initData:function(){this.getRouteMapMark(),this.getRouteLine(),this.getBusPos()},setView:function(t){var e,n=null===(e=t[0])||void 0===e?void 0:e.StopPosition,a=n.PositionLat,s=n.PositionLon;this.$refs.mapRoute.drawMark(t),this.$refs.mapRoute.setView(a,s)}},mounted:function(){this.routeName=this.$route.query.routeName,this.city=this.$route.query.city;var t=this.$route.query.to,e=this.$route.query.back;this.destination={to:t,back:e},this.$refs.mapRoute.initMap()}},Jt=Vt,Qt=Object(l["a"])(Jt,Nt,St,!1,null,null,null),Wt=Qt.exports,Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"px-4 pt-10"},[n("select",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],on:{change:[function(e){var n=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.city=e.target.multiple?n:n[0]},t.getRoute]}},t._l(t.CITY_LIST,(function(e){return n("option",{key:e.value,domProps:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),0),n("p"),n("div",{staticClass:"input-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.routeName,expression:"routeName"}],attrs:{type:"text",placeholder:"請輸入公車路線/起訖站名"},domProps:{value:t.routeName},on:{input:function(e){e.target.composing||(t.routeName=e.target.value)}}}),n("img",{attrs:{src:"images/search.svg",alt:""},on:{click:t.reset}})]),n("h2",[t._v(t._s(t.routeName))]),n("bus-search-list",{attrs:{pageData:t.pageData}}),n("transition",{attrs:{name:"slide-fade"}},[t.showKeyboard?n("key-board",{on:{setRouteName:t.setRouteName,reset:t.reset,deleteRouteName:t.deleteRouteName}}):t._e()],1),n("bus-search-btn",{on:{ctrlKeyboard:t.ctrlKeyboard}})],1)},te=[],ee=(n("a434"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("h3",{staticClass:"text-left pt-4 text-gray-500"},[t._v("搜尋結果")]),n("ul",[t._l(t.pageData,(function(e){return n("li",{key:e.RouteUID,staticClass:"rounded-md pl-4 py-2 border-line border-b text-left",on:{click:function(n){return t.toBusRoute(e)}}},[n("h3",{staticClass:"font-bold text-black"},[t._v(" "+t._s(e.RouteName.Zh_tw)+" ")]),n("p",{staticClass:"text-gray-500 text-sm"},[t._v(" "+t._s(e.DepartureStopNameZh)+" "),n("span",[t._v(" - ")]),t._v(" "+t._s(e.DestinationStopNameZh)+" ")])])})),0===t.pageData.length?n("li",[n("p",[t._v("哎呀!查無結果")]),n("p",[t._v("請重新搜尋關鍵字或切換縣市")])]):t._e()],2)])}),ne=[],ae={props:{pageData:{type:Array,default:function(){return[]}}},methods:{toBusRoute:function(t){var e=t.DepartureStopNameZh,n=t.DestinationStopNameZh,a=t.RouteName,s=t.City;this.$router.push({path:"/busroute",query:{routeName:a.Zh_tw,city:s,to:e,back:n}})}}},se=ae,re=Object(l["a"])(se,ee,ne,!1,null,null,null),oe=re.exports,ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"\n        fixed\n        bottom-0\n        left-0\n        w-full\n        p-2\n        h-56\n        flex\n        justify-between\n        flex-wrap\n        bg-gray-300\n        border-t border-gray-500\n    "},[t._l(t.keyBoardList,(function(e){return n("li",{key:e.value,staticClass:"keyboard-item",style:{color:e.style?e.style:"#37206D"},on:{click:function(n){e.fn?t.handleFunction(e.fn):t.setRouteName(e.value)}}},[t._v(" "+t._s(e.value)+" ")])})),n("li",{staticClass:"keyboard-item bg-gray-600",on:{click:t.deleteRouteName}},[n("img",{attrs:{src:"images/Keyboard-delete.svg",alt:""}})])],2)},ce=[],ue={name:"Home",components:{},props:{keyword:{type:String,default:""}},computed:{keyBoardList:function(){return this.keyBoardShow?this.keyList:this.keyList2}},data:function(){return{keyBoardShow:!0,keyList:[{value:"紅",style:"#FB5B44",fn:""},{value:"藍",style:"#448DFB",fn:""},{value:"1",style:"",fn:""},{value:"2",style:"",fn:""},{value:"3",style:"",fn:""},{value:"綠",style:"#59DD86",fn:""},{value:"棕",style:"#D4A274",fn:""},{value:"4",style:"",fn:""},{value:"5",style:"",fn:""},{value:"6",style:"",fn:""},{value:"橘",style:"#FB9232",fn:""},{value:"黃",style:"#ECC94C",fn:""},{value:"7",style:"",fn:""},{value:"8",style:"",fn:""},{value:"9",style:"",fn:""},{value:"更多",style:"#6F7585",fn:"ctrlKeyboard"},{value:"幹線",style:"",fn:""},{value:"0",style:"",fn:""},{value:"重設",style:"#6F7585",fn:"reset"}],keyList2:[{value:"市民",style:"",fn:""},{value:"捷運",style:"",fn:""},{value:"貓空",style:"",fn:""},{value:"A",style:"",fn:""},{value:"F",style:"",fn:""},{value:"內科",style:"",fn:""},{value:"高鐵",style:"",fn:""},{value:"跳蛙",style:"",fn:""},{value:"L",style:"",fn:""},{value:"R",style:"",fn:""},{value:"南軟",style:"",fn:""},{value:"快線",style:"",fn:""},{value:"JOY",style:"",fn:""},{value:"E",style:"",fn:""},{value:"T",style:"",fn:""},{value:"返回",style:"gray",fn:"ctrlKeyboard"}]}},methods:{setRouteName:function(t){this.$emit("setRouteName",t)},deleteRouteName:function(){console.log("deleteRouteName"),this.$emit("deleteRouteName")},reset:function(){console.log("Reset"),this.$emit("reset")},ctrlKeyboard:function(){this.keyBoardShow=!this.keyBoardShow},handleFunction:function(t){this[t]()}}},le=ue,fe=(n("e943"),Object(l["a"])(le,ie,ce,!1,null,"165f24ab",null)),de=fe.exports,pe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ball touch-ball",on:{click:t.ctrlKeyboard}},[t.showKeyboard?n("img",{attrs:{src:"images/keyboard.svg",alt:""}}):n("p",{staticClass:"text-gray-500"},[t._v("TOP")])])},me=[],he={data:function(){return{showKeyboard:!0}},methods:{ctrlKeyboard:function(){this.showKeyboard&&this.$emit("ctrlKeyboard"),this.showKeyboard||window.scrollTo({top:0,left:0,behavior:"smooth"})},scrollEvent:function(){this.showKeyboard=window.pageYOffset<window.innerHeight}},mounted:function(){window.addEventListener("scroll",this.scrollEvent)},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollEvent)}},be=he,ve=Object(l["a"])(be,pe,me,!1,null,"76e95ae1",null),ge=ve.exports,ye={components:{KeyBoard:de,BusSearchList:oe,BusSearchBtn:ge},data:function(){return{CITY_LIST:at,city:at[0].value,routeName:"",busList:[],showKeyboard:!1,pageData:[],endFlag:!1}},computed:{liveBus:function(){return this.busList.filter((function(t){return t.PlateNumb}))},showSearch:function(){return this.routeName.length>0}},methods:{getRoute:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={city:t.city,$filter:t.routeName?"contains(RouteName/Zh_tw, '".concat(t.routeName,"')"):""},e.prev=1,e.next=4,it(n);case 4:a=e.sent,t.busList=a,t.splitData(),console.log("result",a),e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](1),console.log("error",e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})))()},splitData:function(){0===this.busList.length&&(this.endFlag=!0);var t=this.busList.splice(0,30);this.pageData=this.pageData.concat(t)},setRouteName:function(t){this.routeName+=t,this.getRoute()},deleteRouteName:function(){this.routeName=this.routeName.substring(0,this.routeName.length-1)},reset:function(){this.routeName=""},ctrlKeyboard:function(){this.showKeyboard=!this.showKeyboard},scrollEvent:function(){this.endFlag||window.innerHeight+window.pageYOffset>=document.body.offsetHeight&&this.splitData()}},mounted:function(){this.getRoute(),window.addEventListener("scroll",this.scrollEvent)},beforeDestroy:function(){window.removeEventListener("scroll",this.scrollEvent)}},we=ye,je=(n("723c"),Object(l["a"])(we,Xt,te,!1,null,null,null)),xe=je.exports,ke=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",t._l(t.favoriteList,(function(t){return n("li",{key:t})})),0)},_e=[],Ce=n("2f62"),Ne={components:{},computed:Object(F["a"])({},Object(Ce["b"])(["favoriteList"]))},Se=Ne,Le=Object(l["a"])(Se,ke,_e,!1,null,null,null),Oe=Le.exports,Ie=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("map-near",{ref:"mapNear",on:{getNowPos:t.getNowPos}}),t._m(0),t.showNearStation?n("bus-near-list",{attrs:{stopList:t.stopList},on:{selectRoute:t.selectRoute}}):n("bus-near-estimate-time",{attrs:{stationId:t.stationId,city:t.city}})],1)},Me=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n            rounded-full\n            touch-ball\n            fixed\n            bg-light\n            w-16\n            h-16\n            flex\n            justify-center\n            items-center\n            shadow-lg\n        "},[n("img",{attrs:{src:"images/cursor.svg",alt:""}})])}],Te=(n("caad"),n("7db0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n        pt-2\n        rounded-tl-3xl\n        px-4\n        h-72\n        w-screen\n        rounded-rl-3xl\n        bg-light\n        fixed\n        z-20\n        bottom-0\n        overflow-y-scroll\n    "},[n("div",{staticClass:"w-10 h-0.5 bg-gray-400 m-auto"}),n("h2",{staticClass:"py-4 text-gray-400 text-left"},[t._v("最近站牌")]),n("ul",t._l(t.stopList,(function(e){return n("li",{key:e.StationUID,staticClass:"p-2 my-2 border border-purple-300 rounded-lg text-left",on:{click:function(n){return t.selectRoute(e)}}},[n("h3",{staticClass:"font-bold text-black py-2"},[t._v(" "+t._s(e.StationName.Zh_tw)+" "),n("span",{staticClass:"\n                        rounded-full\n                        bg-gray-400\n                        px-2\n                        py-1\n                        text-sm text-white\n                    "},[t._v(" "+t._s(t.direction[e.Bearing])+" ")])]),n("p",{staticClass:"text-primary-700"},[t._v(" "+t._s(t.transRoute(e.Stops))+" ")])])})),0)])}),Re=[],De=(n("a15b"),{props:{stopList:{type:Array,default:function(){return[]}}},data:function(){return{direction:{E:"東行",W:"西行",S:"南行",N:"北行",SE:"東南行",NE:"東北行",SW:"西南行",NW:"西北行"}}},methods:{selectRoute:function(t){this.$emit("selectRoute",t)},transRoute:function(t){var e=t.map((function(t){return t.RouteName.Zh_tw}));return e.join(",")}}}),Be=De,Pe=Object(l["a"])(Be,Te,Re,!1,null,"54894218",null),Ee=Pe.exports,$e=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"relative z-10 w-screen h-screen",attrs:{id:"map"}})},ze=[],Ae=null,Ke=null,Ze=null,Fe=null,He=null,Ue={data:function(){return{}},methods:{createMap:function(){var t="pk.eyJ1Ijoiam9lY2hhbmcxMDE0IiwiYSI6ImNrdno1ZnM3OTRtM2YzMG8wYnA2NGxpZzEifQ.EDTMLv4rcckA89UjJNWgXQ";Ae=Et.a.map("map"),Et.a.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}",{attribution:'Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',maxZoom:18,id:"mapbox/streets-v11",tileSize:512,zoomOffset:-1,accessToken:t}).addTo(Ae),console.log("init!!!!"),Ke=(new Et.a.MarkerClusterGroup).addTo(Ae),Ze=(new Et.a.MarkerClusterGroup).addTo(Ae),this.$emit("getNowPos")},cleanMarker:function(){Ke.clearLayers(),Ae.eachLayer((function(t){t instanceof Et.a.Marker&&Ae.removeLayer(t)}))},cleanStation:function(){Ze.clearLayers()},setView:function(t,e){console.log("latitude, longitude",t,e),Ae.setView([t,e],16)},createMark:function(){Fe=new Et.a.Icon({iconUrl:"images/mark/BusStop.svg",shadowUrl:"",iconSize:[40,40],iconAnchor:[12,41],popupAnchor:[1,-34]}),He=new Et.a.Icon({iconUrl:"images/mark/TrackingSpot.svg",shadowUrl:"",iconSize:[40,40],iconAnchor:[12,41],popupAnchor:[1,-34]})},drawSelfMark:function(t,e){Ke.addLayer(Et.a.marker([t,e],{icon:He})),Ae.addLayer(Ke),this.setView(t,e)},drawStation:function(t){this.cleanStation(),t.forEach((function(t){var e=t.StationPosition,n=e.PositionLat,a=e.PositionLon;Ze.addLayer(Et.a.marker([n,a],{icon:Fe}).bindPopup('\n                            <h2 class="title">'.concat(t.StationName.Zh_tw,"</h2>\n                        ")))})),Ae.addLayer(Ze)},createMarkerCluster:function(){return new Et.a.markerClusterGroup({showCoverageOnHover:!1,spiderfyOnMaxZoom:!0,zoomToBoundsOnClick:!0,argumentsspiderfyOnMaxZoom:!1,maxClusterRadius:120,iconCreateFunction:function(t){var e=t.getAllChildMarkers(),n='\n                            <div class="circle">\n                                    '.concat(e.length,"\n                                    </div>\n                            . ");return Et.a.divIcon({html:n,className:"clusterBikeIcon",iconSize:Et.a.point(49,49)})}})}},mounted:function(){this.createMark(),this.createMap()},beforeDestroy:function(){Ae=null,Ke=null,Ze=null}},Ye=Ue,Ge=Object(l["a"])(Ye,$e,ze,!1,null,null,null),qe=Ge.exports,Ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"\n        pt-2\n        rounded-tl-3xl\n        px-4\n        h-72\n        w-screen\n        rounded-rl-3xl\n        bg-light\n        fixed\n        z-20\n        bottom-0\n        overflow-y-scroll\n    "},[t._l(t.busData,(function(e){return n("ul",{key:e.StopUID},[n("li",{staticClass:"w-full border-b p-4 border-line relative"},[n("span",{class:{red:e.EstimateTime<=90}},[t._v(" "+t._s(t.transStatus(e.EstimateTime))+" ")]),n("span",[t._v(t._s(e.RouteName.Zh_tw))])])])})),n("div",{staticClass:"line"})],2)},Je=[],Qe={props:{stationId:{type:String,default:""},city:{type:String,default:""}},computed:{goBus:function(){return this.sortedBusData.filter((function(t){return 0===t.Direction}))},backBus:function(){return this.sortedBusData.filter((function(t){return 1===t.Direction}))},sortedBusData:function(){var t=Object(A["a"])(this.liveBus);return t.sort((function(t,e){return t.StopUID.localeCompare(e.StopUID)}))}},data:function(){return{timer:null,listType:0,second:60,busData:[]}},methods:{transStatus:function(t){return console.warn("sec",t),vt(t)},getDataByTimer:function(){var t=this;this.timer=setInterval((function(){t.second-=1,t.second<=0&&(t.second=60)}),1e3)},getBusArrive:function(){var t=this;return Object(Z["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n={city:t.city,stationId:t.stationId},e.next=4,mt(n);case 4:a=e.sent,t.busData=a,console.log("result"),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log("error",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},setTab:function(t){this.listType=t}},mounted:function(){this.getBusArrive(),this.getDataByTimer()},beforeDestroy:function(){clearInterval(this.timer)}},We=Qe,Xe=Object(l["a"])(We,Ve,Je,!1,null,null,null),tn=Xe.exports,en={components:{BusNearList:Ee,MapNear:qe,BusNearEstimateTime:tn},data:function(){return{stopList:[],timeList:[],routeList:[],stationId:"",city:"",showNearStation:!0}},computed:{stationIDList:function(){return this.stopList.map((function(t){return t.StationID}))}},methods:{getNowPos:function(){var t=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition((function(e){var n=e.coords.longitude,a=e.coords.latitude;console.log("longitude",n),console.log("latitude",a),t.getNearStop(a,n),t.$refs.mapNear.drawSelfMark(a,n)}),(function(e){var n=e.code,a=e.message;t.getNearStop(25.047675,121.517055),console.log("error","code=".concat(n,",\n                            msg=").concat(a))}))},getNearStop:function(t,e){var n=this;return Object(Z["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return s={$spatialFilter:"nearby(".concat(t,",").concat(e,",200)")},a.prev=1,a.next=4,dt(s);case 4:r=a.sent,n.stopList=n.filterReapeatList(r),n.$refs.mapNear.drawStation(r),console.log("this.lineInfo",n.lineInfo),a.next=13;break;case 10:a.prev=10,a.t0=a["catch"](1),console.log("error",a.t0);case 13:case"end":return a.stop()}}),a,null,[[1,10]])})))()},filterReapeatList:function(t){var e=[];return t.filter((function(t){if(!e.includes(t.StationID))return e.push(t.StationID),t}))},selectRoute:function(t){var e=t.LocationCityCode,n=t.StationID,a=at.find((function(t){return t.ISO===e})),s=a.value;console.log(e,s,"efffefe"),this.stationId=n,this.city=s,this.showNearStation=!1}}},nn=en,an=Object(l["a"])(nn,Ie,Me,!1,null,null,null),sn=an.exports;a["a"].use(k["a"]);var rn=[{path:"/",name:"Index",component:Ct},{path:"/busroute",name:"BusRoute",component:Wt},{path:"/bussearch",name:"BusSearch",component:xe},{path:"/favorite",name:"Favorite",component:Oe},{path:"/busnear",name:"BusNear",component:sn}],on=new k["a"]({routes:rn}),cn=on,un=n("bfa9");a["a"].use(Ce["a"]);var ln=new un["a"]({storage:window.localStorage,reducer:function(t){return{favoriteList:t.favoriteList,historyList:t.historyList}}}),fn=function(){return{favoriteList:[],historyList:[]}},dn=new Ce["a"].Store({state:fn,mutations:{updateFavoriteList:function(t,e){t.favoriteList=e},updateHistoryList:function(t,e){t.historyList=e}},actions:{},modules:{},plugins:[ln.plugin]}),pn=(n("a766"),n("b972"),n("b9eb")),mn=n.n(pn),hn=n("ecee"),bn=n("c074"),vn=n("ad3d");a["a"].component("font-awesome-icon",vn["a"]),a["a"].component("pagination",mn.a),hn["c"].add(bn["c"]),hn["c"].add(bn["a"]),hn["c"].add(bn["b"]),a["a"].config.productionTip=!1,a["a"].prototype.$bus=new a["a"],new a["a"]({router:cn,store:dn,render:function(t){return t(x)}}).$mount("#app")},"5bc4":function(t,e,n){},"640b":function(t,e,n){},"723c":function(t,e,n){"use strict";n("640b")},"85ec":function(t,e,n){},a766:function(t,e,n){},a7d3:function(t,e,n){},b014:function(t,e,n){"use strict";n("14e5")},cf19:function(t,e,n){"use strict";n("d7c9")},d7c9:function(t,e,n){},d959:function(t,e,n){},db94:function(t,e,n){"use strict";n("5bc4")},dbf2:function(t,e,n){},de35:function(t,e,n){"use strict";n("dbf2")},e943:function(t,e,n){"use strict";n("2cb0")}});